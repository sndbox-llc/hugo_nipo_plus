{{ $moji := .Get "filename" }}
{{ $aliceIcon := .Get "alice" | default "default"}}
{{ $title := .Get "title" | default "SVGによるNipoPlus画面イメージ"}}
{{ $desc := .Get "desc" | default "未設定" }}
{{ $msg := .Get "msg" | default "zzz... zzz..."}}
{{ $fontsize := .Get "fontsize" | default "22px" }}

{{ $imgTablet := .Page.Resources.GetMatch (printf "%s_tablet*" ($moji)) }}
{{ $imgPhone := .Page.Resources.GetMatch (printf "%s_phone*" ($moji)) }}

{{ $id := partial "make-random-md5.hugo" }}


<style>
  .tablet-frame {
    display: block;
    border: 10px solid black; /* 太い黒い枠 */
    border-radius: 20px; /* 角丸 */
    max-width: 100%;
    margin: 0 auto;
  }
  .responsive-image {
    width: 100%;
    height: auto;
  }
  .character {
    width: 120px;
    height: 120px;
  }
  .character img {
    width: 100px;
    height: 100px;
  }

  @media (max-width: 768px) {
    .character {
      display: none !important
    }
  }
</style>

<div style="position: relative; display: inline-block;">
  <div class="tablet-frame" style="position: relative; z-index: 1;">
    <picture>
      <source srcset="{{ $imgPhone.RelPermalink }}" media="(max-width: 768px)">
      <source srcset="{{ $imgTablet.RelPermalink }}" media="(min-width: 769px)">
      <img src="{{ $imgTablet.RelPermalink }}" alt="{{ $title }}" class="responsive-image">
    </picture>
  </div>
  <div class="character-container" style="position: absolute; bottom: -10px; left: -10px; display: flex; align-items: center; z-index: 2;">
    <div class="character" style="background-color: #e0f7fa; border-radius: 50%; padding: 10px; margin-right: 20px; display: flex; align-items: center; justify-content: center;">
      <img src='/images/alice/{{$aliceIcon}}.png' alt="キャラクター" style="border-radius: 50%;">
    </div>
    <div style="background: #fff; border: 4px solid orange; border-radius: 10px; padding: 10px; font-size: 22px; position: relative;">
      {{$msg}}
      <div style="position: absolute; top: 50%; left: -20px; transform: translateY(-50%); width: 0; height: 0; border: 10px solid transparent; border-right-color: #fff;"></div>
      <div style="position: absolute; top: 50%; left: -22px; transform: translateY(-50%); width: 0; height: 0; border: 11px solid transparent; border-right-color: orange;"></div>
    </div>
  </div>
</div>


<figcaption class="small mt-3">{{ $title }}</figcaption>
<div class="mt-1 mb-4">
  <a href="#{{ $id }}_phone" class="lightbox-link btn btn-outline-primary d-md-inline d-none">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" height="25" width="25"><title>スマートフォン</title><path d="M260-40q-24 0-42-18t-18-42v-760q0-24 18-42t42-18h440q24 0 42 18t18 42v760q0 24-18 42t-42 18H260Zm0-150v90h440v-90H260Zm220.175 75q12.825 0 21.325-8.675 8.5-8.676 8.5-21.5 0-12.825-8.675-21.325-8.676-8.5-21.5-8.5-12.825 0-21.325 8.675-8.5 8.676-8.5 21.5 0 12.825 8.675 21.325 8.676 8.5 21.5 8.5ZM260-250h440v-520H260v520Zm0-580h440v-30H260v30Zm0 640v90-90Zm0-640v-30 30Z"/></svg>
    スマホの画面
  </a>
  <a href="#{{ $id }}_pc" class="lightbox-link btn btn-outline-primary d-inline d-md-none">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960" height="25" width="25"><title>コンピュータ</title><path d="M70-120q-12.75 0-21.375-8.675Q40-137.351 40-150.175 40-163 48.625-171.5T70-180h820q12.75 0 21.375 8.675 8.625 8.676 8.625 21.5 0 12.825-8.625 21.325T890-120H70Zm70-120q-24 0-42-18t-18-42v-480q0-24 18-42t42-18h680q24 0 42 18t18 42v480q0 24-18 42t-42 18H140Zm0-60h680v-480H140v480Zm0 0v-480 480Z"/></svg>
    PCの画面
  </a>
</div>
<a href="javascript:history.back();" class="lightbox" id="{{ $id }}_pc">
  <img src="{{ $imgTablet.RelPermalink }}" alt="{{ $title }}" class="lightbox-image" loading="lazy">
</a>
<a href="javascript:history.back();" class="lightbox" id="{{ $id }}_phone">
  <img src="{{ $imgPhone.RelPermalink }}" alt="{{ $title }}" class="lightbox-image" loading="lazy">
</a>

<script type="application/ld+json">
  [{
    "@context": "https://schema.org/",
    "@type": "ImageObject",
    "caption": "{{ printf "%s（タブレット/PC画面）" $title }}",
    "contentUrl": "{{ $imgTablet.Permalink }}",
    "license": "/system/credit/",
    "acquireLicensePage": "/system/credit/",
    "creditText": "sandbox LLC",
    "creator": { "@type": "Person", "name": "shinya ueda" },
    "copyrightNotice": "Nipo Plus"
  },
  {
    "@context": "https://schema.org/",
    "@type": "ImageObject",
    "caption": "{{ printf "%s（スマートフォン画面）" $title }}",
    "contentUrl": "{{ $imgPhone.Permalink }}",
    "license": "/system/credit/",
    "acquireLicensePage": "/system/credit/",
    "creditText": "sandbox LLC",
    "creator": { "@type": "Person", "name": "shinya ueda" },
    "copyrightNotice": "Nipo Plus"
  }]
</script>
