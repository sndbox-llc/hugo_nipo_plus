+++
description = "レポートデータから各種グラフの作成が簡単にできます。アプリ内で完結しエクセルに落とす必要は有りません。"
tags = ["有料プラン限定"]
title = "レポートデータを自動集計しグラフを作成する"
menuTitle = "📈グラフの作成"
toc = true
weight = 101004003
aliases = []
images = ["pie-chart_tablet.png"]
+++

{{<info>}}
集計がメニューに無いときは[グループ設定](/docs/manual/initial-setting/setting-group/#optionalFunction)から機能を有効にしてください
{{</info>}}


集計が可能なフォームが含まれたテンプレートはグラフ化できます。
グラフは複数種類作成でき、必要に応じてワンクリックで切替が可能です。

{{<btnCenter "/tags/集計可能フォーム/" "集計可能フォーム一覧">}}

{{<icatch filename="chart" msg="レポートをグラフ化して視覚的に分析が可能です" alice="guide">}}

## グラフの種類{#charts_type}

以下のグラフを作成できます

- 円グラフ
- 折れ線グラフ
- 棒グラフ
- 積み上げ縦棒グラフ
- レーダーチャート
- 複合グラフ（折れ線と棒グラフの組み合わせ）

## グラフの作成{#make}

グラフ作成の手順は以下の通り。

1. 過去データ推移の下にある「グラフ作成」ボタンをクリック
1. ポップアップでグラフ作成ウィザードが表示されます
1. グラフの種類を選択します
1. グラフに使用する入力フォームを選びます
1. プレビューを確認します
1. 保存します

今回は具体例として、以下の5つの集計可能なフォームを含んだレポートテンプレートをグラフ化します。  
国語・算数・理科・英語・社会、合計5つの入力フォームがあるレポートです。これらはすべて集計が可能なフォームを使用しています。

グラフ作成をクリックします。

{{<icatch filename="source-data" msg="5つの数値入力フォームがあるレポート。これをグラフ化する">}}

{{<nextArrow>}}

グラフの種類を選択します。この例では「折れ線グラフ」を選択しました。

{{<icatch filename="select-chart-type" msg="手順1:グラフの種類を選びます">}}

選んだら次へボタンをクリックします
{{<nextArrow>}}

グラフに使用する入力フォームを選びます。利用可能なものだけリストアップされています。
この例では3つチェックしています。

{{<icatch filename="select-use-field" msg="手順2:グラフに使用するフィールドを選びます">}}

{{<nextArrow>}}

グラフのプレビューが表示されますのでイメージどおりか確認します。

{{<icatch filename="chart-preview" msg="手順3:詳細設定とグラフのプレビューを確認">}}

グラフに名前をつけてください。後で切り替える際にわかりやすい名称を設定します。
グラフのタイプは「推移」「累積」から選びます。両者の違いは言葉では伝えにくいので画像付きで紹介します。

**累積グラフ**の特徴

- スタッフごとに集計が行われます
- スタッフ同士の比較に適したグラフになります

{{<icatch filename="each-staff-chart" msg="グラフの基準（X軸）をスタッフにする。これによりスタッフ同士の成績比較が可能">}}

**推移グラフ**の特徴

- 時系列を基準に集計が行われます
- 日毎の変化を見るのに適しています

{{<icatch filename="time" msg="グラフの基準（X軸）を日付にする。これによりデータの推移を見ることが可能">}}

詳しくは次のセクションで紹介します。
最後に設定完了ボタンをクリックしてください。これでグラフが作成できました。

{{<alice pos="right" icon="ok">}}
目的に応じて適材適所！2つ作っておけば簡単に切り替えできるよ
{{</alice>}}

## 作成したグラフを表示する{#show}

作成したグラフがボタンとして追加されます。ボタンをクリックしてグラフを表示します。

{{<icatch filename="chart-created" msg="作成したグラフの表示:複数のグラフはクリックで切替が可能">}}

### データのグループ化{#grouping}

グラフタイプが「推移」のものはグループ化集計が可能です。グループ化とは「同日」など基準を設けてその範囲のレポートを合算してグラフ化する仕組みです。
初期状態ではグループ化は無効になっています。次の画像は「同日」を基準にグループ化した例です。

{{<icatch filename="grouping" msg="時系列グラフは「日」「時間」など基準を変更してグループ化できる">}}

「同日」を基準にすると同じ日に提出されたレポートを1つのレポートに見立てて合算処理を行います。何件のデータが合算されたのかはオレンジ色のバーで表示します。上の画像では、12/2日に3件のデータが合算されたことがわかります。
合算されたデータはグラフにもそのまま反映されます。

{{<alice pos="right" icon="ok">}}
グラフの設定はアカウントの単位で記録されるので、各々のスタッフが自由にグラフを作ってOKですよ
{{</alice>}}


## 複合グラフを作る{#seccond_axis}

複合グラフは軸を2つ使用したグラフで、特にデータに大きな開きがある場合に便利です。
「折れ線グラフ」「棒グラフ」の場合は第2軸を指定することで複合グラフを作ることができます。

- 折れ線を選ぶと第2軸が棒グラフになります
- 棒グラフを選ぶと第2軸が折れ線グラフになります


{{<icatch filename="seccond-axis-chart" msg="グラフに第2軸を追加する">}}

{{<alice pos="right" icon="ok">}}
入場者数と売上高を1つのグラフにすると桁が違うので小さい方がみえなくなるよね。これを回避するよ
{{</alice>}}

## 積み上げ棒グラフを作る{#stack}

グラフの種類選択時に「積み上げ棒グラフ」を選ぶことで積み上げ棒グラフが作成できます。
前述した第二軸と組み合わせることも可能です。

{{<icatch filename="stack-bar-chart" msg="積み上げ棒グラフと折れ線グラフを組み合わせた複合グラフ">}}

## 円グラフを作る{#circle}

グラフの種類選択時「円グラフ」を選ぶことで円グラフが作成できます。
円グラフは全体に占める割合を表します。推移では期間内の合計をもとに円グラフを生成します。
円グラフは推移と累積で表示が変わります。
**推移**の例です。

- 期間内のデータを合計してグラフ化

{{<icatch filename="pie-chart" msg="レポートのデータを元に円グラフを作成（日付を基準）">}}

**累積**の例です。

- 期間内のスタッフごとに分けて合計しグラフ化
- スタッフ数×項目のため円が細分化しやすい

{{<icatch filename="pie-chart-accumulation" msg="スタッフを基準として円グラフを作成">}}

{{<alice pos="right" icon="ok">}}
難しく考えずにプレビューをみながら調整すればいいよ
{{</alice>}}

## レーダーチャートを作る{#radar}

グラフ作成時に「レーダーチャート」を選ぶとレーダーチャートが作成できます。
レーダーチャートは円グラフと似た性質を持っています。

{{<imgproc radar-chart.png "レーダーチャート（日付を基準として作成）" />}}
{{<imgproc radar-chart-accumulation.png "レーダーチャート（スタッフを基準として作成）" />}}

---

## 集計方式の違いとグラフ{#diff}

個々からは少し細かい話になります。
まず集計ルールですが大きく分けて２つの集計ルールがあります。

<dl class="basic">
<dt>回数の集計</dt>
<dd>
単語の選ばれた回数を集計できます。以下のフォームが該当します
<ul>
<li><a href="/docs/manual/initial-setting/template/selects/#plain">選択式（単）フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/selects/#multiple">選択式（複）フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/selects/#layerd">選択式（階層）フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/digital/#rate">レート入力フォーム</a></li>
</ul>
</dd>
<dt>合計の集計</dt>
<dd>
単純に合算した集計ができます。以下のフォームが該当します
<ul>
<li><a href="/docs/manual/initial-setting/template/date_time/#range">期間入力フォーム</a> (単位は分:1時間半は90分として出力)</li>
<li><a href="/docs/manual/initial-setting/template/digital/#commonNumber">数値入力フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/digital/#slider">スライダ入力フォーム</a></li>
</ul>
</dl>

ここまでのグラフはすべて**合計の集計**でした。回数の集計をグラフにすることもできます。

### 選択式入力フォームに数値が含まれる場合のグラフ化{#text}

選択肢の単語に数字が含まれている場合は数字として集計が可能です。
[選択式入力フォーム](/docs/manual/initial-setting/template/selects/#plain)を含んだテンプレートを用意しました。項目は3つ（線形ズレ・重量誤差・状態）です。

{{<imgproc report-sample-select.png "このようなレポートをグラフ化する" />}}

<dl class="basic">
<dt>線形ずれ</dt>
<dd>選択肢ですが全て数を含んでいます(+1mmなど)</dd>
<dt>重量誤差</dt>
<dd>選択肢ですが全て数を含んでいます(+30Kgなど)</dd>
<dt>状態</dt>
<dd>数値が一切含まれません</dd>
</dl>

選択肢はデータ上、単語として記録されるため、選ばれた回数として集計がされてしまいます。例えば次の画像のように表示されることでしょう。

{{<imgproc select_count.png "推移で選択肢は1回か0回しかありえないため、グラフ上は0/1のいづれかとなる" />}}

選択肢の数字を**数値**として変換してグラフを作成する際は「選択肢を数値化してグラフ化」を選びます。

{{<nextArrow>}}

{{<imgproc words-to-digit.png "選択肢を数値化することで普通の数値のようにグラフ化される" />}}

数値変換に関するその他ルール

- 数値化できない選択肢の場合は0として変換される（例えば「美品」など）
- 漢数字は使えない（一、二、三など）
- 単語内に複数数値が出現する場合は最初の数字が変換される（5月14日は5となる）
- カンマはうまく機能しない

一般的には選択肢は円グラフのほうが向いています。円グラフの場合は単語の出現回数を基準にグラフが生成されます。

{{<imgproc pie-chart-report.png "選択肢の出現回数を円グラフ化する" />}}

### レート入力フォームのグラフ化{#rating}

レート入力フォームは以下のような見た目をしています。

{{<imgproc report-sample-rate.png "レート入力フォームの例" />}}

レートでは集計ルールを2つ選ぶことができます

- ★1の選ばれた回数、★2の選ばれた回数などそれぞれで集計する（回数としてカウント）
- 星の合計を集計する


**選ばれた回数としてグラフ化**した例

{{<imgproc rate-chart-count.png "星の数で分けてグラフ化" />}}

**星の合計を集計したグラフ**の例

{{<imgproc rate-chart-total.png "星の数の合計を求めてグラフ化" />}}

### 過去データ推移に追加した数式をグラフ化する{#fomula}

過去データの一覧表上に独自の数式を追加することができます。この例では「国語・算数・理科・英語・社会」の合計を求める数式を追加しています。

{{<imgproc calc-field.png "数式の追加" />}}

{{<alice pos="right" icon="ok">}}
数式について詳しくは[過去データ推移](/docs/manual/analytics/transition/)のページをご覧ください
{{</alice>}}

数式として追加したデータもグラフの材料にすることができます。
グラフ作成時に使用するフォームを選ぶ画面上に、追加した数式が出現しますのでそちらをチェックしてください。

{{<imgproc field-select.png "独自に追加した数式をグラフとして使う" />}}

追加した数式はシステム上、数値として扱われるので[数値入力フォーム](/docs/manual/initial-setting/template/digital/#commonNumber)と同じような挙動をします。

{{<imgproc usage-guide.png "数式に指定した名前がそのままグラフの凡例として使用されます" />}}

## 作成したグラフはあなただけのものです{#own}

グラフの設定はスタッフアカウントごとに記録されます。あなたが作ったグラフは他のスタッフには見えません。
