+++
description = ""
menuTitle = "選択肢入力(2層式)"
tags = []
title = "選択肢入力（2層式）入力フォーム\n1つ目の解答に応じて2つ目の選択肢が変わる入力フォーム"
toc = true
weight = 140
reqMermaid = true
+++

{{<imgproc selectc.png "選択肢（2層)を使った日報テンプレートの例" />}}

2層式入力フォームはその名の通り、2つの階層で解答する入力フォームです。問1の回答結果により、問2の設問内容が変わります。例えば問1の回答が「野菜」だった場合と、「果物」だった場合でそれぞれ問2の選択肢が変わります。

{{<mermaid align="center">}}
graph LR;
    C{野菜<br>果物}
    C -->|野菜を選択| D[白菜<br>人参<br>きゅうり<br>etc...]
    C -->|果物を選択| E[いちご<br>ばなな<br>パイナップル<br>etc...]
{{< /mermaid >}}

階層分けが不要であれば類似の入力フォームである[選択肢入力フォーム](/org/groupsetting/template/select/)を使用してください。

## 選択肢（2層式）の初期設定

質問1の選択肢を追加するごとに、質問2の選択肢欄も自動で追加されていきます。基本的には質問1と質問2の選択肢を埋めていくことで初期設定は完了します。

|名称|説明|
|---|---|
|表示名|項目見出しエリアに表示される文字です|
|色|項目見出しエリアの背景色を設定できます。灰色・茶色・緑色・紺色・赤色から選択してください。初期値は灰色です|
|サイズ|表示名の文字サイズを最小・小・中・大の4段階から設定できます。初期値は「中」です。表示名が長すぎる場合は設定が無視されます|
|メモ|入力エリアの画面左上に赤文字で表示されます。日報・チェックシートの作成者が迷うことのないように補足文として活用できます|
|入力必須|これがONの場合、選択肢が選ばれていないと日報の提出ができません|
|幅|1〜12の幅を選択できます。推奨幅は4〜12です|
|入力方式|ラジオ式・プルダウン式から選択できます。これは初期値であり、日報作成時に執筆者は自由に切り替えることができます|
|選択肢|問1の選択肢を入力します。改行で区切ります|
|〜〜が選ばれたときに表示する選択肢|〜〜には「選択肢」で追加した項目が入ります。選択肢の数だけこの項目が生成されます。|

## 選択肢(2層式)入力フォームの使用例

以下のような日報テンプレートを自作しました。

{{<imgproc template.png "選択肢入力フォームの設定画面" />}}

この日報テンプレートをもとに、入力画面から表示画面、出力などについて見ていきます。

### 選択肢(2層式)の日報入力画面イメージ

日報作成直後の画面では問1しか表示されませんが、問1を選択すると自動で問2が出現します。問2の内容は問1によって変化します。

{{<imgproc input.png "選択肢入力フォームの入力画面" />}}

入力方式はラジオ式とプルダウン式の2種類があります。上の画像で言えば、左の設問（やさい・くだもの）がラジオ式になります。
これらの入力方式は日報作成時に日報作成者が自由に切り替えが可能ですが、テンプレート設定で「入力切替を無効にする」がONの場合、切り替えボタンが表示されません。
入力必須が設定されている場合は、問2まで回答して初めて提出が可能になります。問1だけでは未入力として弾かれます。

### 選択肢(2層式)の日報を受け取ったときの画面

受け取った日報を表示すると、答1・答2といった形で分けて画面に表示されます。

{{<imgproc post.png "選択肢(2層)入力フォームを含んだ日報を受け取った画面例" />}}

表示切り替えをすることでラジオ式に切り替えることも可能です。ラジオ式の場合は選ばれなかった他の選択肢を見れるので他の解答を確認したいときに便利です。
また選択肢(2層式)は自動集計にも対応しておりますが、集計の対象は答2の方に限定されます。答1は集計されませんのでご注意ください。

{{<alice pos="right" icon="pc">}}
CSVに出力してエクセル上から集計することはもちろん可能です
{{</alice>}}

## データ活用編

選択肢(2層式)では以下の機能に対応しています。

|[集計可否](/report/totalling/)|[CSV出力](/report/totalling/csv/)|[PDF出力](/report/read/pdf/)|[文字検索](/report/read/list/)|
|:---:|:---:|:---:|:---:|
|○|○|○|○|

### CSV出力

選択肢(2層式)をCSVに出力すると、答1・答2の2列に展開されてCSVに出力されます。

{{<imgproc csv.png "選択肢(2層)入力フォームを含んだ日報をCSVに出力し、エクセルで開いた画面" />}}

### サンプルデータ

このページで使用した実際のサンプルをダウンロードできます

{{<attachments style="orange" />}}
