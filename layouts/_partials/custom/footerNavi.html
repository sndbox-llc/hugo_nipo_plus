<nav class="footer-nav" style="overflow: hidden;">

    {{/*  フッター記事一覧・カテゴリの並び順。未記載のデータは非表示 */}}
    {{ $sectionOrder := slice 
        "docs"
        "legacy"
        "lp"
        "reverse"
        "news"
        "excel"
        "tips"
        "others"
    }}
    {{/* ⭐ セクション名と表示名のマッピング（辞書）を定義 ⭐ */}}
    {{ $sectionMap := dict
        "docs" "NipoPlusマニュアル"
        "excel" "エクセル活用テクニック"
        "legacy" "旧バージョンのNipo"
        "news" "お知らせ"
        "tech" "技術ブログ"
        "tips" "便利な使い方"
        "lp" "特設記事"
        "reverse" "過去の質問集"
        "others" "その他"
    }}
    {{/* 1. showBottom: true の記事を取得 */}}
    {{ $allRegularPages := .Site.RegularPages }}
    {{ $footerPages := where $allRegularPages "Params.hideFooter" "!=" true }}

    {{/* 2. 取得した記事をセクション名でグループ化（カテゴリ分け）*/}}
    {{ $groupedPages := $footerPages.GroupBy "Section" }}

    <div class="row px-2">

        {{ range $key := $sectionOrder }}
            {{/* $groupedPages の中で Key が $key に一致するグループを探す */}}
            {{ $groupList := where $groupedPages "Key" $key }} 
            
                {{/* グループが存在する場合（リストの最初の要素がある場合）のみ処理 */}}
                {{ with index $groupList 0 }}
                
                    <div class="footer-column  col-xl-4 col-md-5 col-sm-8 col-xs-16">
                        {{/* ⭐ 表示するセクション名を取得 ⭐ */}}
                        {{ $sectionKey := .Key }}
                        {{ $sectionTitle := default $sectionKey (index $sectionMap $sectionKey) }}

                        {{/* セクション名（列のタイトル）を表示 */}}
                        <h4 class="column-title">{{ $sectionTitle }}</h4>

                        <ul class="list-unstyled column-list">
                            {{/* with の中は . がグループオブジェクトを指すため .Pages を使用 */}}
                            {{ range sort .Pages "Params.bottomWeight" }}
                                {{ $linkText := default .Title .Params.menuTitle }}
                                <li class="nav-item"><a href="{{ .Permalink | relURL }}" title="{{ .Title }}">{{ $linkText }}</a></li>
                            {{ end }}
                        </ul>
                    </div>
                {{ end }}
        {{ end }}
    </div>
</nav>