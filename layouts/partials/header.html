<!DOCTYPE html>
<html lang="{{ .Page.Language | default "ja" }}" class="js csstransforms3d">
  <head>
    <!-- Analytics 本番でのみ出力する -->
    {{ if not .Site.IsServer }}
    {{ partial "gtag" . }}
    {{ end }}
    <!-- quasarを使うページの場合に限り、quasar cssをロードする -->
    {{ if eq .Params.quasar true }}
    <link href="https://cdn.jsdelivr.net/npm/quasar@2.7.1/dist/quasar.prod.css" rel="stylesheet" type="text/css">
    {{ end }}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {{ hugo.Generator }}
    {{ partial "meta.html" . }}
    {{ partial "favicon.html" . }}
    <title>{{ .Title }} {{ default "::" .Site.Params.titleSeparator }} {{ .Site.Title }}</title>

    {{ $assetBusting := not .Site.Params.disableAssetsBusting }}
    <link href="{{"css/nucleus.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/fontawesome-all.min.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/hybrid.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/featherlight.min.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/perfect-scrollbar.min.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/theme.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/tabs.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    <link href="{{"css/hugo-theme.css" | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    {{with .Site.Params.themeVariant}}
    <link href="{{(printf "css/theme-%s.css" .) | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    {{end}}
    {{ range .Site.Params.custom_css -}}
    <link href="{{(printf "%s" .) | relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}" rel="stylesheet">
    {{- end }}
    <!-- SCSS対応　-->
    {{ if eq .Params.isNipo true }}
      <!-- 旧Nipo・緑ベース -->
      {{ $sass := resources.Get "sass/rootold.scss" }}
      {{ $style := $sass | resources.ToCSS }}
      <link rel="stylesheet" href="{{ $style.Permalink }}">
    {{ else }}
      <!-- NipoPlus・紫ベース -->
      {{ $sass := resources.Get "sass/root.scss" }}
      {{ $style := $sass | resources.ToCSS }}
      <link rel="stylesheet" href="{{ $style.Permalink }}">
    {{end}}

    <script src="{{"js/jquery-3.6.0.min.js"| relURL}}{{ if $assetBusting }}?{{ now.Unix }}{{ end }}"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      {{ if .Site.Params.disableInlineCopyToClipBoard }}
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      {{ end }}
    </style>
    {{ partial "custom-header.html" . }}
  </head>
  <body class="" data-url="{{ .RelPermalink }}">
    {{ partial "menu.html" . }}
        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
          <div id="top-bar" style="padding-top:10px;padding-bottom:10px;background:white">
            <div id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" class="top_left_btn" data-sidebar-toggle="">
                <i class="fas fa-bars"></i>
              </a>
            </div>
            <div id="top-github-link">
              {{ if eq .Params.isNipo true }}
              <a href="https://nipoapp.sndbox.jp/" class="top_right_btn" target="_blank" onclick="gtag('event', 'footerCtaClick', {'value': '1'});">旧Nipo起動</a>
              {{ else }}
              <a href="https://nipo-plus.web.app/" class="top_right_btn" target="_blank" onclick="gtag('event', 'footerCtaClick', {'value': '1'});">App起動</a>
              {{ end }}
            </div>
          </div>
          <!-- バンくずリスト -->
          {{$showBreadcrumb := (and (not .Params.disableBreadcrumb) (not .Site.Params.disableBreadcrumb))}}
          {{if not .IsHome }}
            <div id="breadcrumbsNavigations">
              <ul>
                {{ template "breadcrumbnav" dict "p1" . "p2" . }}
              </ul>
            </div>
            <hr>
          {{ end }}

        <div id="head-tags">
        {{ partial "tags.html" . }}
        </div>
        {{ if eq .Params.isNipo true }}
        <div style="padding:1rem;background:red; color:white;border: 1px solid red;">
          こちらは旧バージョンのNipoページになります
        </div>

        {{end}}

        {{ if .Params.chapter }}
          <div id="chapter">
        {{ end }}      
        <div id="body-inner">
          {{if and (not .IsHome) }}
            <h1>
              {{ if or (eq .Kind "taxonomy") (eq .Kind "term") }}
                {{.Data.Singular}} ::
              {{ end }}
              {{.Title}}
            </h1>
          {{end}}
          <!-- 目次 -->
          {{if .Params.toc }}
            <nav id="tableOfContents">
              <div class="mokuji">目次</div>
              {{ .TableOfContents }}
            </nav>
          {{end}}

          {{ define "breadcrumbnav" }}
            {{ if .p1.Parent }}
              {{ template "breadcrumbnav" (dict "p1" .p1.Parent "p2" .p2 )  }}
            {{ else if not .p1.IsHome }}
              {{ template "breadcrumbnav" (dict "p1" .p1.Site.Home "p2" .p2 )  }}
            {{ end }}
            {{ if eq .p1 .p2 }}
              <li class="active">{{ .p1.Params.menuTitle }}</li>
            {{ else }}
              <li><a href="{{ .p1.RelPermalink }}">{{ .p1.Params.menuTitle }}</a></li>
            {{ end }}
          {{ end }}

