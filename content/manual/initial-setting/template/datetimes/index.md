+++
description = "10:00〜15:00のような期間の入力ができる入力フォームです"
menuTitle = "期間入力"
tags = ["集計可能な入力フォーム"]
title = "期間入力フォーム"
toc = true
weight = 160
+++

{{<icatch filename="span" msg="作業時間や期間 日付の計算も可能" title="期間入力フォーム" fontsize="30px" alice="ok" >}}

|[集計可否](/manual/analytics/)|[CSV出力](/manual/analytics/csv/)|[PDF出力](/manual/read-report/pdf/)|[文字検索](/manual/read-report/list/)|
|:---:|:---:|:---:|:---:|
|○|○|○|○|

## 期間入力フォームは経過時間を求める入力フォーム

期間入力フォームは開始時刻と終了時刻を入力できる入力フォームです。入力形式は時刻のみ、日付と時刻、日付から選択できます。
時刻のみの場合はスライダー方式の時刻入力とキーボードによる入力が選べます。
所要時間を入力するとその経過時間(差分)が日報入力画面上にヒントとして表示されます。
期間入力で登録されたデータは経過時間を集計することが可能です。

## 期間入力フォームの初期設定

{{<appscreen filename="date-span-template-edit" title="期間入力フォームのみで構成されたテンプレートの例"  >}}

共通の設定項目については[「各種入力フォームの共通設定項目」](/manual/initial-setting/template/make/#common_setting)を参照してください。
以下は本入力フォームにのみ存在する設定項目です

|名称|説明|
|---|---|
|[入力必須](/tips/required/)|これがONの場合、数値が空欄だと日報の提出ができなくなります|
|初期状態でONにする|これがONの場合、日報作成時にこのチェックボックスはONの状態でスタートします|
|集計する|[データ推移](/manual/analytics/list/)・[日報集計](/manual/analytics/transition/)でこの項目を表示させる場合はONにします。初期値はONです|
|形式|日付（西暦あり）・日付（西暦無し）・時刻のみ・日付と時刻の4種類から選択します|
|スライダ上の最小|形式が「時刻のみ」の場合に限り表示されます。スライダ式で時刻入力する際のスライダの左端を何時にするか設定します。初期値は8:00です|
|スライダ上の最大|形式が「時刻のみ」の場合に限り表示されます。スライダ式で時刻入力する際のスライダの右端を何時にするか設定します。初期値は20:00です|
|刻み|形式が「時刻のみ」の場合に限り表示されます。1目盛りあたり何分進めるか設定します。初期値は30分です|

入力形式の4種類については次のような形式になります。

|入力形式|フォーマット|例|入力切替|
|---|---|---|---|
|日付（西暦有り)|YYYY/MM/DD|2022/12/01|可|
|日付（西暦なし）|MM/DD|12/01|不可|
|時刻のみ|HH:mm|13:21|可|
|日付と時刻|YYYY/MM/DD HH:mm|2022/12/01 13:21|不可|

{{<alice pos="right" icon="ok">}}
エクセルなどの一般的な表計算ソフトでも解釈可能な形式だよ。
{{</alice>}}

## 期間入力フォームの入力画面

期間入力フォームは入力形式によって入力の画面が変わります。

{{<appscreen filename="input" title="期間入力の入力イメージ。時刻の場合はスライダーを使った入力方式も可能"  >}}

特筆すべきは時刻のみの入力形式です。時刻のみはスライダー風の入力形式が用意されています。
スライダは便利ですがこの状態だと宵越しの入力はできません。**深夜12時をまたぐ入力が必要な場合は入力方式を切り替える**ことで入力が可能です。
また反復入力（可変長）と組み合わせることで時刻の始点が自動セットされる入力補助が発動します。詳しくは[反復入力のページ](/manual/initial-setting/template/array/)を御覧ください。

## 日付と時刻の日報を読む

以下のように表示されます。

{{<appscreen filename="post" title="期間入力のデータは開始点から終了点までの時間と、その経過時間が文字で表示されます。（カレンダーなどは表示されません）"  >}}

期間入力フォームは集計可能な入力フォームのため、過去データ推移を受信画面から直接確認することもできます。
期間データはデータシート化や、データシートをもとにしたグラフの生成が可能です。

{{<appscreen filename="charts" title="期間のデータ（単位：分）を使って積み上げたて棒グラフを作成した例。他にも折れ線や円グラフなど自由に作成できます"  >}}

{{<button "/manual/analytics/chart/" "日報をグラフ化する">}}

数値データをスタッフ毎に集計したい場合は累積モードに切り替えてください。合計が表示されます。

{{<appscreen filename="total" title="期間のデータを集計する。単位はすべて「分」に統一されて計算されることに注意"  >}}

日報表示画面の集計は**直近数件の日報を集計**するため実用的ではないことに注意してください。一般的には「今月」や「先月」といった単位で集計したいはずです。
{{<button "/manual/analytics/transition/" "期間指定して日報を集計する">}}

日報作成時に入力された実際のデータ（自〜至）の他に、計算で求めらされた自〜至までの経過時間が表示されます。
また期間入力フォームは集計可能入力フォームのため、過去データ推移の領域にも集計値が表示されます。
集計上の値は**単位が分**になっている点に注意してください。

{{<alice pos="right" icon="ok">}}
例えば510分は、時分に治すと8時間30分になります
{{</alice>}}

### 期間入力フォームの日報をCSVに出力する

期間入力フォームの日報はCSVに出力できます。出力時には「自」と「至」の2列に展開して出力されます。

{{<imgproc csv.png "期間入力フォームを含んだ日報をCSVに出力した例" />}}

出力される値は文字列です。例えば日付と時刻であれば

```sh
2022/05/19 21:00
```

のような値がCSV上に出力されます。
エクセルなどの表計算ではこの形式をシリアル値として変換して日数計算などに利用することが可能です。
詳しくは[営業日報の集計](/tips/sales_report/)を参照してください。

### サンプルデータ

このページで使用した実際のサンプルをダウンロードできます

{{<attachments style="orange" />}}
