+++
description = "クロス集計を使えば製造部品毎にテンプレートを分けた場合に各部品の不良率を求めたり、複数のチェックシートのデータを集めて全体の傾向を把握するなど、様々な分析に利用することができます。"
menuTitle = "クロス集計"
tags = []
title = "複数のテンプレートを比較し集計する"
toc = true
weight = 101004008
contributors = []
aliases = ['/manual/analytics/cross/']

+++

クロス集計を使うことで複数のテンプレートを1枚の表にまとめ、異なる日報テンプレート同士の異なるデータ同士を集計することができます。
具体的な用途として、例えば製造部品ごとにテンプレートを分けているが、各部品毎の生産数や不良数などを比較したい時などに便利です。

この時、例えばA部品のテンプレートとB部品のテンプレートは形が異なっていても構いません。集計が可能な入力フォームであれば自由にクロス集計の素材に利用できます。

## クロス集計を作成する

クロス集計テーブルは1グループに付き最大で50個まで作成が可能です。

1. メニューから「集計/CSV出力」をクリックし、集計画面を表示します。
1. 画面をスクロールし、「クロス集計を作成」ボタンをクリックします。

{{<appscreen filename="table-make" title="クロス集計の新規作成"  >}}

クロス集計テーブル作成ウインドウがポップアップで全画面に表示されます。
この画面からクロス集計テーブルを作って行きます。

### テーブルの行と列を作成する

テーブルは**行と列とセル**で構成されます。
テーブルにテンプレートを追加するごとに1行（横方向）追加されます。テンプレート追加は画面右端の「○件選択」と書かれたプルダウンから行います。
列は「参照列」と「計算列」の2種類があります。参照列は日報テンプレートの入力フォームを指定できます。（計算列は後述）

{{<appscreen filename="table-edit" title="行と列とセルをそれぞれ設定する"  >}}

上のテーブルは2つのテンプレート（タイトルを除き2行）と、2つの参照列を追加した例です。
参照列はクリックするだけで追加されますが、そのままだと「列1」のような名前でわかりにくいので鉛筆アイコンから名前を変更しています。
行と列の交差したセルに、どの値を表示するかをプルダウンで選びます。プルダウンで選べるのはテンプレート内の**集計可能な入力フォーム**に限られます。

### 計算列について

計算列は参照列のデータをもとに簡単な四則演算を行うことができる列です。
例えば生産数と破損数の列を使って生産率などを計算するときに使うことができます。
ここではシンプルに1列目の生産数と2列めの品質を単純に掛け算する列を作りたいときは次の画像のように設計します。

{{<appscreen filename="calc-field" title="計算列の追加"  >}}


### 結果のプレビューと保存

実際の集計結果はプレビューで確認できます。

{{<appscreen filename="previews" title="プレビュー"  >}}

通常の列では日報のデータを集計した結果が表示され、計算列では指定した計算式に従って業務日報のデータを計算して表示しています。
※数値がすべて0の場合は集計に使用される日報のデータが0件の可能性があります。

最後にクロス集計に名前をつけて、保存ボタンをクリックして保存します。
保存されたクロス集計はクロス集計一覧に表示され、クリックで表示します。複数種類のクロス集計がある場合はボタンを押すごとにテーブルが切り替わります。
集計の期間は右パネルのカレンダーで変更可能です。

{{<appscreen filename="view" title="作成したクロス集計を表示する"  >}}

これでA部品とB部品、異なるテンプレートで作成された業務日報を同時に比較できるようになりました。

## クロス集計テーブルを編集する

作成したクロス集計を修正する必要がある場合は修正するクロス集計を表示後、鉛筆アイコンをクリックします。
編集画面は新規作成画面とほぼ同じです。
