+++
title = "セキュリティについて"
description = "クラウドサービスにおいてセキュリティは最も優先しなければならない課題です。NipoPlusを安心して利用いただくためにNipoPlusで行っているセキュリティ対策についてご紹介します"
tags = ["リリースノート"]
weight = 99
+++

クラウドサービスを利用するにあたりセキュリティを気にすることはとても重要です。NipoPlusではセキュリティ対策を最も重要な課題として常に安全に気を配り、お客様のデータを安全に保護できるよう努めております。
ここではNipoPlusがどのようなインフラ上に展開されて、どのようにデータを保護しているかについてご紹介します。

## NipoPlusのサーバはGoogle謹製

NipoPlusはクラウドサービスのためデータの保管はサーバ上に行われます。NipoPlusではサーバに[Google社のサーバ(GCP)](https://cloud.google.com/gcp/)を使用しています。  
世界的なIT企業であるGoogle社のサーバは堅牢で、容量、信頼性、パフォーマンス全てにおいて世界最高の水準を誇っています。
また、開発には[Firebase](https://firebase.google.com/?hl=ja)を使用しております

{{<alice pos="right" icon="question">}}
[Firebase](https://firebase.google.com/?hl=ja)使用していますがFirebaseはGCP上に展開されます。ちょっとややこしいですね
{{</alice>}}

FireBaseは、Webアプリやスマートフォンアプリに特化したサーバとお考えください。

- アカウント管理
- ファイル管理
- データ管理

などがパッケージになっているため開発者にとって使い勝手が良いものです。と同時にGoogle社のノウハウやインフラを使えることで安全性も１から開発するよりもずっと高い水準で維持することができます。

### 通信の暗号化

今では当たり前になりつつありますが通信にはhttpsプロトコルを使用しています。サーバとの通信はすべて暗号化され第三者がデータを盗み見ることはできません。
ブラウザのURL表示エリアに鍵のマークがついていれば安心な通信であることが確認できます。[Web版Nipo](https://nipo-plus.web.app/)をご利用の際はURLバーから確認できます

{{<imgproc https.png Resize "1200x" "ご利用のアプリバージョンは左メニュー下部に記載されています" />}}

{{<alice pos="right" icon="phone">}}
[Android](https://play.google.com/store/apps/details?id=jp.sndbox.nipoplus) / [iOS版](https://apps.apple.com/jp/app/id1625797169)のNipoではURLバーは出ませんが、Web版同様安全な通信です
{{</alice>}}

※NipoPlus独自の暗号ではなく、あくまでも標準規格としての暗号化通信であることに留意してください

### 保管されるデータもすべて暗号化

Firebaseの機能であるデータ管理をFirestoreと呼びます。[Firestoreではデータを書き込む際に自動で暗号化](https://cloud.google.com/firestore/docs/server-side-encryption?hl=JA)して書き込みを行います。  
暗号化の設定はNipoPlusの開発陣が行うのではなくインフラ側がすべて自動で行います。
データが呼ばれるとその都度自動で復号化してユーザに届けられます。利用者は暗号化・復号化のプロセスを一切知覚すらしません。あまりにも呆気ないと感じるかもしれません。
しかし、あなたの日報データは安全に暗号化されていますのでご安心下さい。

{{<alice pos="right" icon="shield">}}
大切なデータは暗号化！鉄則だよ
{{</alice>}}

### 直近10日間のデータバックアップ

Firestore上のデータを丸ごと定期的にバックアップしています。バックアップのサイクルは24時間に1度自動で行われます。  
すべてのご利用者様のデータを自動でバックアップし、最短でも10日間のデータを保存しています。（最長30日保管)
バックアップは最長30日保管され、それを超えたバックアップは自動で削除されます。メンテナンスの関係で若いバックアップが削除されることがありますが、それでも最も直近の10日間のバックアップは必ず保管されます。

※自動バックアップは全体のスナップショットであり、個別の復元依頼は対応できません。システム全体の復旧にのみ使用されるものです。

### 堅牢なセキュリティ・ルール

すべての日報データは同じサーバに保管されますがA社の日報をB社が閲覧することはできません。論理的に安全な壁により権限のないアクセスは遮断されます。
権限の有無とはなんでしょう？こたえはシンプルです。グループに所属しているメンバーであればグループ内のデータにアクセスする権限が付与されます。それ以外は一切遮断されます。  
Firebaseではアクセスする権限の判定を**セキュリティ・ルール**というファイルにて定義します。  
日報の検索においては外部のデータベースを使用しますがこのデータベースへのアクセスにはFirebaseのサーバを経由してのみアクセスされます。アクセス権の有無はFirebaseのサーバ上で適切に処理され、
正当な権限のユーザのみ日報の検索ができるように十重二十重の安全策が成されています。

{{<alice pos="right" icon="shield">}}
少し専門的な話になるけどNipoPlusは2種類のデータベースを使ってるんだ。FirestoreとElastic。どちらもFirebaseを経由してアクセスされるよ
{{</alice>}}

### No-SQL型のデータベース

SQLインジェクションという有名な攻撃手法があります。これは広く一般的に使われているリレーショナルデータベースを標的とした攻撃手法です。
NipoPlusが使用しているFirestoreとElasticはいづれもNo-SQL型であり確立された従来の攻撃手法が構造的に使えません。これはセキュリティ対策というよりは利用しているデータベースの特性の話になりますが、
リレーショナルデータベースの持つ潜在的なリスクがそもそも適用されないことは大きな安心材料となります。

{{<alice pos="right" icon="shield">}}
ホームページによく使われるWordpressはリレーショナルデータベース型だよ
{{</alice>}}

### アカウントの保護

万が一ログインパスワードが漏洩してアカウントを乗っ取られた場合でもFirebaseの保護機能を使うことでアカウントを安全迅速に攻撃者から取り戻すことができます。
詳しくは[ログインE-mailの変更](/account/email/)のページで解説していますが、ログインメールアドレスが変更されると変更前のメールアドレスにも通知のメールが自動で届きます。  
被害者はこのメールで不正な攻撃にすぐ気づくことができ、届いたメールのリンクから変更されたメールアカウントを巻き戻して取り返す仕組みが搭載されています

## 鍵のかかってない金庫に意味はない

システムが安全性を提供するのは当然ですが使う側も安全に気を使う必要があることは理解してください。
例えばログインパスワードがpasswordや123456、000000などの推測されやすいパスワードは使うべきでは有りません。

[2021年の漏洩パスワードランキング](https://www.itmedia.co.jp/news/articles/2202/08/news101.html)によると、次のようなパスワードが漏洩上位にランクインしています
|順位|漏洩パスワード|
|---|---|
|1|123456|
|2|password|
|3|000000|
|4|1qaz2wsx|
|5|12345678|
|6|123456789|
|7|111111|
|8|sakura|
|9|dropbox|

{{<alice pos="right" icon="shield">}}
心当たりはない？もっとバレにくいパスワードにしないとだめだよ！
{{</alice>}}

ここで最後にIPAが作った秀逸なイラストを送ります

{{<imgproc password.jpg Resize "1200x" "IPA-情報処理推進機構 パスワード" />}}

[画像出典元はこちらです](https://www.ipa.go.jp/security/keihatsu/munekyun-pw/slideshow/index.html)

## セキュリティに関するよくある質問と答え

NipoPlusはリリース後まだ日が浅いため問い合わせはそこまでありませんが、過去にNipoで頂いたご質問とその回答をここに記載します。
NipoもNipoPlusも利用しているインフラはおなじであり、よって回答も同一です。

|Q|A|
|---|---|
|データセンターは国内にありますか？|いいえ。データセンターは米国にあります。保存されるデータは、バックアップを含めてすべて米国の複数の拠点（マルチリージョン）に保管されています|
|データセンターは安全ですか?|はい。安全です。具体的な安全対策は[Firebase公式サイト](https://firebase.google.com/terms/data-processing-terms?hl=ja#1.-data-center-and-network-security)を参照してください|
|ハードウェアの限界(メモリやCPU、ストレージ）の限界に対する対策は行われますか?|はい。柔軟に拡張が行われます。 Firebaseはオートスケーリングのため、負荷が増えれば自動でCPUの速度が上がったり、データの保存量が増えれば自動で保存容量が拡張されます。|
|サーバの脆弱性に関するガイドラインや対策はマニュアル化されていますか？|サーバレスのため管理はすべてFirebaseにまかせています。 自社でサーバの管理が無いからこそ「サーバレス」と呼ばれます。サーバに発見されたセキュリティリスクはFirebaseが修正を行うため、安心です|
|ネットワークの回線と伝送は安全ですか?|はい。安全です。[Firebase公式サイト](https://firebase.google.com/terms/data-processing-terms?hl=ja#1.-data-center-and-network-security)にデータセンタに関する記載がありますので参照してください|
|マルチテナント型（同じサーバに複数のクライアントを格納）ですか?|すべてのお客様のデータを同一のサーバに格納しておりますが堅牢なアクセス制御により論理的に分離されております。|
|データのバックアップは行われますか?|24時間に1度のバックアップが行われます。データは最短10日以上保管されます|
|データは暗号化されて保存されていますか?|すべてのデータは暗号化されて保存されます。通信回線も暗号化（Https)されて送受信されています。|
|従業員のITリテラシーの教育などは行っておりますか？|いいえ。Nipoの開発は役員（１名）のみであり、従業員はいません。教育ではなく自己練磨を行っております。日々セキュリティに関する情報を自ら仕入れ、安全性を確保するよう努めております。|
|従業員による情報の流出などについての罰則や、就業規則はありますか？|いいえ。ありません。前述の通り、開発は１名であり会社として明確なルールは定めておりません。 |
|開発者のマスターパスワードは定期的に変更されていますか？|いいえ。パスワードを定期的に変更していません。 パスワードの定期的な変更は一昔前の常識です。[定期的なパスワードの変更は現在推奨されていません](https://www.nikkei.com/article/DGXMZO28578370W8A320C1CC1000/)。（日経新聞記事）これは日本の総務省も推進しています。
|開発者の端末はセキュリティ対策ソフトが導入されていますか?|ESETウイルス対策ソフトを導入しています。 ウォッチガードなどのいわゆるUTMは利用しておりません|
|開発に利用する端末は施錠できるロッカーに保存されていますか?または盗難防止用チェーンなどの対策は取られていますか？|いいえ。代わりというわけでは有りませんが[ストレージは暗号化](https://support.apple.com/ja-jp/HT204837)されて保存されます|
|守秘義務契約を結ぶことは可能ですか?|基本的に個別の契約は行っておりません。利用規約の記載をご確認のうえご利用ください|
