+++
description = "テンプレートカスタムパーツの1つ。一覧から選ぶだけで入力が可能なフォームをレポートに追加できます。複数個選ぶことが可能です。集計にも対応しています"
tags = ["語録機能", "集計可能フォーム", "テンプレートパーツ", "テンプレート"]
title = "🧩選択式入力の動的変化"
menuTitle = "選択式入力の動的変化"
toc = true
weight = 101001200
images = []
+++


## 選択肢のリストを動的に変化させる{#dinamic_switch_select}

[選択式入力フォーム（単）](/docs/manual/initial-setting/template/select/)・及び[選択式入力フォーム（複）](/docs/manual/initial-setting/template/select2/)は他の選択式入力フォームの回答結果により自身の選択肢のリストを動的に変更する機能があります。
これを動的変化機能といいます。

例えば「地域」という[選択式入力フォーム](/docs/manual/initial-setting/template/select/)があったとします。
地域の選択肢は「北関東・関東・北陸」の３つとします。

地域の選択の結果に応じて、「支店」という選択肢を用意しておきましょう。支店の選択肢は「地域」の選択肢によって動的に変化することができます。
例えば地域に「北関東」を選んだとき、支店の選択肢が動的に「栃木県宇都宮支店・栃木県栃木市支店・栃木県日光支店」に変わります。


{{<appscreen filename="dinamic-selection" title="他の入力結果に応じて選択肢のリストを動的に変化させる">}}

このように回答に応じて次の回答を変えることで、より柔軟で独創的なレポートフォームを作ることがプログラマ不在でも作れます。
ぜひ御社の日報・点検業務にご活用ください。

## 動的変化の設定方法{#how_to_setting}

動的変化を使うにはテンプレートの設定画面から行います。設定は３種類有ります。

<dl class="basic">
<dt>参照先</dt>
<dd>変化を引き起こす大元のフォームです。先の例でいうと「地域」がこれに該当します
<dt>参照先の値</dt>
<dd>参照先に何が選ばれたとき を決めます。例えば「北関東」が選ばれたとき のように指定します</dd>
<dt>変化後のリスト</dt>
<dd>変化させたいリストを記述します。北関東が選ばれたときは「宇都宮支店・栃木市支店」のように列挙します</dd>
</dl>

例えば[選択式入力フォーム](/docs/manual/initial-setting/template/select/)（単）を参照先として指定するには次の画像のようになります。

{{<imgproc dinamic-selection-setting.webp "動的変化の設定画面" />}}

[選択式入力フォーム](/docs/manual/initial-setting/template/select2/)（複）を参照先として指定する場合、参照先の値は複数選択することになりますが、**すべてにマッチしたとき条件が成立**となります。一部一致ではありません。


### 条件は複数指定可能{#ifthen}

動的変化の条件は複数指定することができます。先の例であれば、「北関東」を選んだとき、「関東」を選んだとき、「北陸」を選んだときで３つの条件を指定する必要があります。

### 指定した条件は上位にあるほど優先度が高い{#priolity}

少し細かい話ですが、条件は登録した順に並びますが、より「上」に配置された条件が優先されます。条件が複数あっても参照先が１つの場合はあまり問題になりません。
注意しないと行けないケースは**参照先のフォームが複数種類ある場合**です。  
参照先Aと参照先Bどちらも条件を満たしているときは、条件がより上にあるものが優先されます。内部的には上から条件をチェックし、マッチしたらそこで捜査処理を中断しています。

## 条件を満たしていませんと表示されるとき{#error_case}

[選択式入力フォーム](/docs/manual/initial-setting/template/select/)を動的変化させるには、トリガーとなるための参照先フォームが必要です。極端な話、テンプレート内にフォームが１個しかない場合、そもそも参照する対象が無いため利用できません。  
条件を満たしていないとき、動的変化の画面には「このテンプレートでは動的変化をつかう条件を満たしていません」と表示され、追加ボタンが表示されなくなります。

{{<appscreen filename="disable-dinamic" title="動的変化が利用できないケース">}}


動的変化を使用する具体的な条件は以下のとおりです。

- 自身の[選択式入力フォーム](/docs/manual/initial-setting/template/select/)の他に別の[選択式入力フォーム](/docs/manual/initial-setting/template/select/)が存在すること（単・複どちらでも可）
- 上記のフォームが「語録機能」を無効にしていること

上記条件を満たすことで動的変化設定が可能になります。
