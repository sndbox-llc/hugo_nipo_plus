+++
title = "選択肢入力フォーム"
draft = false
tags = ["日報テンプレート", "入力フォーム", "編集者権限"]
weight = 120
description = "チェックシートや日報に選ぶだけで入力できる選択肢フォームを追加できます。選択肢は設定で自由に変更できます。入力が苦手なスタッフも楽に入力できる便利なフォームです"
+++

{{<imgproc icatch.png "選択肢入力フォームを含んだ日報テンプレート" />}}

選択肢入力フォームは日報やチェックシート上に予め回答を用意して、一覧から選択することで入力できるフォームを追加できるパーツです。
日報やチェックシートの作成者側目線で見ると、回答が用意されていて選ぶだけで済むため入力業務の負担が大きく軽減できるメリットがあります。
選ぶだけの簡単操作ですから特に文字入力が苦手なスタッフに優しい設計です。またその性質上、スマートフォンやタブレットなどのタップ操作で入力するデバイスと相性が良いです。

{{<alice pos="right" icon="pc">}}
もちろんPCからもクリック操作で入力可能です
{{</alice>}}

このページで紹介している**選択肢**は、解答欄の中から１つだけ選ぶことができる形式のものです。
もし複数回答したい場合は[選択肢（複数回答）](/org/groupsetting/template/select2/)を参照してください

## 選択肢入力フォームの初期設定

選択肢入力フォームでは予め用意する選択肢や、入力の方式（ラジオ式、プルダウン式）の変更などができます。選択肢は枠内に文字を入力して追加できます。改行で区切られてそれぞれが選択肢の回答リストとなります。

|名称|説明|
|---|---|
|表示名|項目見出しエリアに表示される文字です|
|色|ラベルの色を指定します。初期値は灰色です|
|サイズ|表示名の文字サイズを最小・小・中・大の４段階から設定できます。初期値は「中」です。表示名が長すぎる場合は設定が無視されます|
|入力切替を無効にする|これがOnの場合、日報作成時に入力方式（ラジオ・プルダウン）を変更するボタンが表示されなくなります。画面をスッキリさせたいときはONにしてください|
|メモ|入力エリアの画面左上に赤文字で表示されます。日報・チェックシートの作成者が迷うことのないように補足文として活用できます|
|入力必須|これがONの場合、選択肢が選ばれていないと日報の提出ができません|
|幅|1〜12の幅を選択できます。推奨幅は4〜12です|
|選択肢を直接指定|こちらがONの場合はすぐ下の「選択肢」エリアに直接選択肢を入力できます。最もシンプルな方法です|
|選択肢を語録から取得|この機能はどちらかと言うと応用的機能です。語録は単語をまとめたシンプルなデータです。選択肢のリストを使いまわしたい場合や、選択肢を日報作成時に自由に追加したい場合に利用します。詳しくは[語録のページ](/org/groupsetting/goroku/)を参照してください。|
|入力方式|ラジオ式・プルダウン式から選択できます。日報作成時に執筆者は自由に切り替えることができます（入力切替を無効にするがONの場合は不可）|

## 選択肢入力フォームの使用例

選択肢入力フォームを5つ含んだチェックシートを作成してみました。それぞれに初期設定内容を変更しています。選択肢入力フォームは設定が他の入力フォームに比べて多いためいろいろなパターンを掲載してみます。

{{<imgproc template.png "選択肢入力フォームのみで構成されたチェックシートのサンプル。このテンプレートを使って実際の入力画面や表示画面を確認していきましょう" />}}

### 選択肢入力フォームのチェックシートを作成

実際にスタッフが入力する際の画面を確認してみましょう。
選択肢入力フォームの入力イメージは次の画面のようになります。

{{<imgproc input.png "選択肢入力フォームで構成されたチェックシートの入力画面。それぞれの設定が適切に反映されている事がわかります" />}}

設定によって入力方式や、入力必須の警告などが表示されていることが確認できますね。
入力方式はラジオ式と選択式がありますがデフォルトでは自由に切替が可能です。しかしテンプレートの設定で「入力切替を無効にする」をONにしているものに関しては切替スイッチが表示されていないことがわかります。
また語録を使った箇所では同じ語録をセットすると同じ選択肢が再利用できていることに気づきましたか？このように選択肢の回答郡だけを切り出して語録として利用することもできます。語録を使用した特徴はもう１つあります。それはチェックシート記入時に選択肢を追加できるという点です。

{{<alice pos="right" icon="ok">}}
例えば「かんぴょう」の下に「佐野ラーメン」と追加でき、語録として保存されます。テンプレートの編集権限がないスタッフでも利用できます
{{</alice>}}

{{<imgproc addGoroku.png "語録を使った日報テンプレートは日報作成時に語録を自由に追加できる" />}}

また、プルダウン式を使えば選択肢の絞り込み検索が可能です。選択肢が多くて探すのが困難な場合はプルダウン式に切り替えて入力してください。
{{<imgproc filter.png "プルダウン式の場合はキーボード入力で絞り込み検索ができます。選択肢の項目が多い場合はプルダウンを推奨します" />}}

### 選択肢入力フォームのチェックシートを表示

{{<imgproc post.png "選択肢入力フォームで構成されたチェックシートの受信画面" />}}

受け取った日報に選択肢が含まれる場合は、選ばれた選択肢だけが表示されます。それ以外の選択肢は表示されません。
もしほかの回答を確認したい場合は「切替」ボタンをクリックすることで他の選択肢も表示されます。

## データ活用編

選択肢入力フォームが含まれた日報やチェックシートではCSV出力やPDF出力、検索などが利用できます。

|[集計可否](/report/totalling/form/)|[CSV出力](/report/totalling/csv/)|[PDF出力](/report/read/pdf/)|[文字検索](/report/read/list/)|
|:---:|:---:|:---:|:---:|
|○|○|○|○|

### チェックシートの選択肢データをCSVに出力

選択肢として入力されたデータをCSVに出力できます。選択肢をCSVに出力する前に出力形式の選択ができます。

{{<imgproc csvsetting.png "CSV出力前の設定を変更する。選択肢の場合は列展開のON/OFFにより出力形式が変化します" />}}

CSV出力形式を変更するには「CSV出力」ボタンの右側にある下向き三角矢印のボタンをクリックします。
いくつかのオプションが表示されますが、選択肢に関するオプションは上から１番目の「選択肢（単回答）の展開」という項目です。

|設定|説明|
|---|---|
|列展開がON|選択肢の数だけ列が増えて出力されます。例えば「食べ物」の選択肢が「りんご・ばなな・みかん」の場合、りんごの列、ばななの列、みかんの列で合計3列出力されます。データが選ばれているものには○がつくことで表現されます|
|列展開がOFF|選択肢の数に関わらず1列で表現されます。|

文字で説明してもイメージが湧きにくいと思いますので、同じチェックシートを展開ON・展開OFFそれぞれの設定でCSV出力した結果をみてください。

{{<imgproc csv.png "上のシートが展開ON・下のシートが展開OFFの設定でそれぞれCSV出力したもので、それらをエクセルで開いた画面です。" />}}

目立つように「今日の天気」の選択肢に色をつけてみました。列展開ONの方は天気の種類だけ列が展開されており、列展開OFFの場合は１列で表現されていることがわかります。

{{<alice pos="right" icon="pc">}}
展開ONは集計がしやすくなります。展開OFFは直感的で見やすい表になります。それぞれ一長一短ですね
{{</alice>}}

### 検索機能

選択肢で選ばれた単語は全文検索としてインデックスされます。そのため検索することができます。
例えば上記の例であれば「餃子」や「いちご」などの選択肢ワードでそのまま検索することでそれらが選ばれたチェックシートが検索できます。

### 選択肢の集計機能

選択肢は集計機能にも対応しています。先程ご紹介したCSV出力を使ってエクセルやGoogle Spleadなどを使って集計することもできますが、NipoPlus自体が簡易的な集計機能をサポートしています。
集計を行うには左メニューから「日報の集計」をクリックします。その後に集計したいテンプレートを選ぶと、選ばれたテンプレートの中から集計可能なパーツだけをリストアップしてスタッフごとに集計します。
選択肢入力フォームも集計対象パーツとなりますが、数値と違いますので集計方式は「選ばれた回数」となります。

{{<imgproc calc.png "NipoPlusの集計機能を使ってチェックシートの選択肢データをスタッフごとに自動で集計します" />}}

集計についてより詳しいガイドは[集計機能のページ](/report/totalling/transition/)を御覧ください。

{{<alice pos="right" icon="ok">}}
例えば好きな晴れの日が何回あったのかな？とかエクセル起動するまでもない集計に便利です
{{</alice>}}

### 選択肢の色分けについて

各選択肢単語の後ろに###色名 と書くことで選択肢に色を付けることができます。
たとえば次のように入力します

- りんご###red
- みかん###orange
- ぶどう###blue

色分け機能は便利かもしれませんが多用すると何が重要か見失う事になりかねませんので、適度に使用してください。
対応している色一覧は現在準備中です。

### サンプルデータ

本ページで使用したデータのサンプルをダウンロードできます。

{{<attachments style="orange" />}}
