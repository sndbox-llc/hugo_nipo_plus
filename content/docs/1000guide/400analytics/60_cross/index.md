+++
url = "/docs/manual/analytics/cross/"
title = "異なるテンプレートをまとめて集計【クロス集計】"
menuTitle = "クロス集計"
description = "クロス集計機能を活用して、製造部品ごとの不良率を求めたり、異なるテンプレート間のデータを比較して全体の傾向を分析できます。複数のチェックシートのデータをまとめ、業務効率化とデータの可視化をサポートします。"
toc = true
weight = 460
tags = ["有料プラン限定"]
contributors = []
+++

{{< callout context="note" title="Note" icon="outline/info-circle" >}}
集計がメニューに無いときは[グループ設定](/docs/manual/initial-setting/setting-group/#optionalFunction)から機能を有効にしてください
{{< /callout >}}

クロス集計とは異なる複数のテンプレートを横断して比較・集計する機能です。
例えば次のテンプレートがあるとします

- A部品点検シート
- B部品点検シート
- C部品点検シート

AやB、Cそれぞれの生産数や不良数は通常の集計で簡単に集計が可能です。
クロス集計はABCすべての生産数や不良数をテンプレートごとに集計し一覧表を表示する機能です。

## クロス集計を作成する{#make}

クロス集計テーブルは1グループに付き最大で50個まで作成が可能です。

1. メニューの「集計/CSV出力」をクリックし、集計画面を表示します。
2. 画面下部の「クロス集計を作成」ボタンをクリックします。

{{<icatch filename="img/table-make" msg="異なるテンプレート同士を同時に集計するクロス集計を作成する">}}

クロス集計テーブル作成ウインドウがポップアップで全画面に表示されます。
この画面からクロス集計テーブルを作って行きます。

### テーブルの行と列を作成する{#row_col}

テーブルは**行と列とセル**で構成されます。

テンプレートを追加すると、自動的に1行（横方向）が追加されます。テンプレートは画面右端の「○件選択」のプルダウンから選択します。
列には「参照列」と「計算列」の2種類があり、参照列ではテンプレート内の入力フォームを指定できます。（計算列は後述）

{{<icatch filename="img/table-edit" msg="行と列とセルをそれぞれ設定する">}}

上のテーブルは2つのテンプレート（タイトルを除き2行）と、2つの参照列を追加した例です。
参照列はクリックするだけで追加されますが、そのままだと「列1」のような名前でわかりにくいので鉛筆アイコンから名前を変更しています。
行と列の交差したセルに、どの値を表示するかをプルダウンで選びます。プルダウンで選べるのはテンプレート内の**集計可能な入力フォーム**に限られます。

### 計算列について{#fomula}

計算列は参照列のデータをもとに簡単な四則演算を行うことができる列です。
例えば、生産数と破損数を使って、不良率（破損数 ÷ 生産数 × 100）を計算する際に計算列を利用できます。
ここではシンプルに1列目の生産数と2列めの品質を単純に掛け算する列を作りたいときは次の画像のように設計します。

{{<icatch filename="img/calc-field" msg="クロス集計に計算列を追加">}}

### 結果のプレビューと保存{#save}

実際の集計結果はプレビューで確認できます。

{{<icatch filename="img/previews" msg="クロス集計の結果をプレビューで表示">}}

通常の列にはレポートの集計結果が表示され、計算列には指定した計算式に基づいたデータが表示されます。
※数値がすべて0の場合、使用するデータがない可能性があります。

最後にクロス集計に名前をつけて、保存ボタンをクリックして保存します。
保存されたクロス集計はクロス集計一覧に表示され、クリックで表示します。複数種類のクロス集計がある場合はボタンを押すごとにテーブルが切り替わります。
集計の期間は右パネルのカレンダーで変更可能です。

{{<icatch filename="img/view" msg="作成したクロス集計を表示する">}}

これでA部品とB部品、異なるテンプレートで作成された業務レポートを同時に比較できるようになりました。

## クロス集計テーブルを編集する{#edit}

作成したクロス集計を修正する必要がある場合は修正するクロス集計を表示後、鉛筆アイコンをクリックします。
編集画面は新規作成画面とほぼ同じです。
