+++
title = "可変長入力フォーム"
draft = false
tags = ["日報テンプレート", "入力フォーム", "編集者権限"]
weight = 400
description = "日報の報告内容によって必要な行数が変わるようなケースで利用できる可変長の入力フォームです。単体では動作せず可変長の中に各種フォームを追加することでご利用可能です"
+++

{{<imgproc icatch.png Resize "1200x" "可変長入力フォームを含んだ日報テンプレートの例" />}}

## 複数の入力フォームを１つにまとめて可変長の入力として使う

反復入力は他の入力フォームを組み合わせて使用します。
反復入力に登録すると入力フォームをコピーして可変行の日報を作成できます。
例えば１時間毎に生産した個数を入力したい。こんなときに使えます。

## 反復入力の初期設定

{{<imgproc setting.png Resize "1200x" "反復入力フォームの設定" />}}

|名称|説明|
|---|---|
|表示名|項目見出しエリアに表示される文字です|
|メモ|入力エリアの画面左上に赤文字で表示されます。日報・チェックシートの作成者が迷うことのないように補足文として活用できます|
|初期の行数|日報作成時に反復入力を生成する行数です。初期値は１です|

反復入力を作るには、最初にエクセルの表をイメージすると作業しやすいです。
例えば次のようなものを作りたいと仮定します。

{{<imgproc excel.png Resize "1200x" "エクセルの入力フォームを参照" />}}

何行になるかはその日によって違うので（残業の有無や半日稼働などで変わる）重要ではありません。
反復入力を作る上で重要なのは赤字で書かれた１行目の項目です。
これらをNipoPlusの日報フォームに置き換えて反復入力を作成します。

|名称|適切なフォーム名　|
|---|---|
|時間|[期間入力フォーム](/org/groupsetting/template/datetimes/)|
|生産数|[数値入力フォーム](/org/groupsetting/template/math/)・[スライダ入力フォーム](/org/groupsetting/template/step/)|
|不具合あり？|[チェックボックスフォーム](/org/groupsetting/template/checkbox/)|
|備考|[テキストフォーム](/org/groupsetting/template/text/)|


実際に作ってみるとこのようになります。上のフォーム一覧からクリックするだけで追加できます。
追加された各入力フォームはそれぞれの設定を済ませてください。詳細については各入力フォームのパーツ詳細ページを参照してください

{{<imgproc valiable.png Resize "1200x" "入力フォームを作成する" />}}

この日報テンプレートを保存し、実際に日報作成画面で表示すると次のように見えます

{{<imgproc write.png Resize "1200x" "反復入力日報のレビュー画面" />}}

表示形式は表・カードの２種類から切替が可能です。画面サイズが広い端末では「表」、画面サイズが狭い端末では「カード」が初期値としてセットされます。
カードは縦にスクロールしやすい見た目で、スマートフォンなどと相性の良いレイアウトです。
見た目が変わるだけで入力の項目は同一です

## 反復の日報を受け取ったときにどのように見えるのか？

{{<imgproc post.png Resize "1200x" "反復入力フォームの日報を受信したときの画面イメージ" />}}

反復の項目は他の項目と異なる色で表現されます。
この例では２行ですが、作成された行数だけ表示されます。

## 反復の日報をCSVに出力する

反復の行数と同じ行数を使用してCSVに出力されます。
反復とそれ以外の入力フォームが混在している日報の場合や反復フォームを複数設置した日報をCSVとして出力する場合、
**最も行数の多い反復**に合わせて他の項目は空欄として出力されることに注意してください。

例えば以下のCSV出力は２行で出力されていることが確認できます
{{<imgproc csv.png Resize "1200x" "日報をCSVに出力した例" />}}

反復以外の項目（例えば提出日や提出者といったヘッダー情報など）は、空欄として出力されます

### サンプルデータ

このページで使用した実際のサンプルをダウンロードできます

{{<attachments style="orange" />}}
