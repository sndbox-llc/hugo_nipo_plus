+++
description = "レポートデータから各種グラフの作成が簡単にできます。アプリ内で完結しエクセルに落とす必要は有りません。"
tags = ["有料プラン限定"]
title = "レポートデータを自動集計しグラフを作成する"
menuTitle = "📈グラフの作成"
toc = true
weight = 101004003
aliases = []
images = ["pie-chart_tablet.png"]
+++

{{<info>}}
集計がメニューに無いときは[グループ設定](/docs/manual/initial-setting/setting-group/#optionalFunction)から機能を有効にしてください
{{</info>}}


グラフは「推移表」「累積表」のデータを元に作成されます。推移表や累積表をグラフ化することで視覚的にデータを見ることができます。
NipoPlusでは次のようなグラフを作成可能です

<dl class="basic">
<dt>折れ線グラフ</dt>
<dd>推移表と相性の良いグラフです</dd>
<dt>棒グラフ</dt>
<dd>累積表と相性の良いグラフです</dd>
<dt>積み上げ縦棒グラフ</dt>
<dd>棒グラフを縦に積み重ねるグラフです</dd>
<dt>複合グラフ</dt>
<dd>おセレングラフと棒グラフを組み合わせたグラフです。第二軸を使用します</dd>
<dt>円グラフ</dt>
<dd>全体に占める対象の割合を求めるのに適しています</dd>
<dt>レーダーチャート</dt>
<dd>あまり良くわかりませんがつけておきました</dd>
</dl>




## グラフの作成{#make}

グラフ作成の手順は以下の通りです

1. 「グラフ作成」ボタンをクリック
1. グラフの種類を選択します
1. グラフに使用する入力フォームを選びます
1. プレビューを確認し保存をクリック

今回は「スタッフ同士の成績比較用のグラフ」を作ります。（適宜作りたいグラフによって読み替えてください）

### グラフ作成ボタンをクリック{#step1}

累積表または推移表の下部に「グラフ作成」ボタンが配置されていますのでこのボタンをクリックします。

{{<iTablet filename="createCharts" msg="隠れちゃったね。✗ボタンを押せば私を消せます▶">}}

ウィザードが立ち上がります。3ステップで作成できます

### グラフの種類を選択{#step2}

折れ線、棒グラフなど作りたいグラフの種類を選択します。スタッフ同士の比較には「棒グラフ」が適しているため、今回は棒グラフを選択し、「次へ」ボタンをクリックします。

{{<iTablet filename="selectCharts" msg="スタッフ同士の比較は棒グラフが一番向いていますね" alice="pc">}}

### グラフ化したいフィールドを選択{#step3}

グラフに使用する入力フォームを選び、不要なものはチェックを外しておきましょう。今回、車両移動距離はグラフにしないためチェックを外しています。


{{<iTablet filename="selectField" msg="グラフに使用するフィールドを選びます" alice="pc">}}

選択が完了したら「次へ」ボタンをクリックします。あと一息で完成です。頑張ろう

### グラフプレビューを見ながら最終調整{#step4}

最後はプレビューを見ながら、タイトルや第二軸の設定を行います。設定を変更すると自動でプレビューが変更されるので、プレビューでイメージ通りのグラフか確認してください。  
なお、プレビューとはいえ実データが使用されています。実データがない場合はプレビューを見れませんので注意してください。

{{<iTablet filename="preview" msg="最終調整です" alice="pc">}}


<details>
  <summary>軸の種類を変えるとどうなる？</summary>

軸は「推移」と「累積」の2種類から選択します。推移を選ぶとX軸が「日付」となり、グラフの見た目が大きく変わります
{{<iTablet filename="preview2" msg="推移データをグラフ化したいときはこっちをつかいましょう" alice="pc">}}

</details>



---


## 作成したグラフを表示する{#show}

作ったグラフは推移表・累積表の画面下部に配置されます。複数個作った場合はクリックでグラフの切り替えが可能です。

{{<iTablet filename="switchCharts" msg="グラフの切替表示もワンクリックでラクラクだね" alice="pc">}}


---


## 応用編

ここからは少し細かい話となります。読む必要は有りません。



### 集計方式の違いとグラフ{#diff}

まず集計ルールですが大きく分けて２つの集計ルールがあります。

<dl class="basic">
<dt>回数の集計</dt>
<dd>
単語の選ばれた回数を集計できます。以下のフォームが該当します
<ul>
<li><a href="/docs/manual/initial-setting/template/selects/#plain">選択式（単）フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/selects/#multiple">選択式（複）フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/selects/#layerd">選択式（階層）フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/digital/#rate">レート入力フォーム</a></li>
</ul>
</dd>
<dt>合計の集計</dt>
<dd>
単純に合算した集計ができます。以下のフォームが該当します
<ul>
<li><a href="/docs/manual/initial-setting/template/date_time/#range">期間入力フォーム</a> (単位は分:1時間半は90分として出力)</li>
<li><a href="/docs/manual/initial-setting/template/digital/#commonNumber">数値入力フォーム</a></li>
<li><a href="/docs/manual/initial-setting/template/digital/#slider">スライダ入力フォーム</a></li>
</ul>
</dl>

ここまでのグラフはすべて**合計の集計**でした。回数の集計をグラフにすることもできます。

### 選択式入力フォームに数値が含まれる場合のグラフ化{#text}

選択肢の単語に数字が含まれている場合は数字として集計が可能です。
[選択式入力フォーム](/docs/manual/initial-setting/template/selects/#plain)を含んだテンプレートを用意しました。項目は3つ（線形ズレ・重量誤差・状態）です。

{{<imgproc report-sample-select.png "このようなレポートをグラフ化する" />}}

<dl class="basic">
<dt>線形ずれ</dt>
<dd>選択肢ですが全て数を含んでいます(+1mmなど)</dd>
<dt>重量誤差</dt>
<dd>選択肢ですが全て数を含んでいます(+30Kgなど)</dd>
<dt>状態</dt>
<dd>数値が一切含まれません</dd>
</dl>

選択肢はデータ上、単語として記録されるため、選ばれた回数として集計がされてしまいます。例えば次の画像のように表示されることでしょう。

{{<imgproc select_count.png "推移で選択肢は1回か0回しかありえないため、グラフ上は0/1のいづれかとなる" />}}

選択肢の数字を**数値**として変換してグラフを作成する際は「選択肢を数値化してグラフ化」を選びます。

{{<nextArrow>}}

{{<imgproc words-to-digit.png "選択肢を数値化することで普通の数値のようにグラフ化される" />}}

数値変換に関するその他ルール

- 数値化できない選択肢の場合は0として変換される（例えば「美品」など）
- 漢数字は使えない（一、二、三など）
- 単語内に複数数値が出現する場合は最初の数字が変換される（5月14日は5となる）
- カンマはうまく機能しない

一般的には選択肢は円グラフのほうが向いています。円グラフの場合は単語の出現回数を基準にグラフが生成されます。

{{<imgproc pie-chart-report.png "選択肢の出現回数を円グラフ化する" />}}

### レート入力フォームのグラフ化{#rating}

レート入力フォームは以下のような見た目をしています。

{{<imgproc report-sample-rate.png "レート入力フォームの例" />}}

レートでは集計ルールを2つ選ぶことができます

- ★1の選ばれた回数、★2の選ばれた回数などそれぞれで集計する（回数としてカウント）
- 星の合計を集計する


**選ばれた回数としてグラフ化**した例

{{<imgproc rate-chart-count.png "星の数で分けてグラフ化" />}}

**星の合計を集計したグラフ**の例

{{<imgproc rate-chart-total.png "星の数の合計を求めてグラフ化" />}}

### 過去データ推移に追加した数式をグラフ化する{#fomula}

過去データの一覧表上に独自の数式を追加することができます。この例では「国語・算数・理科・英語・社会」の合計を求める数式を追加しています。

{{<imgproc calc-field.png "数式の追加" />}}

{{<alice pos="right" icon="ok">}}
数式について詳しくは[過去データ推移](/docs/manual/analytics/transition/)のページをご覧ください
{{</alice>}}

数式として追加したデータもグラフの材料にすることができます。
グラフ作成時に使用するフォームを選ぶ画面上に、追加した数式が出現しますのでそちらをチェックしてください。

{{<imgproc field-select.png "独自に追加した数式をグラフとして使う" />}}

追加した数式はシステム上、数値として扱われるので[数値入力フォーム](/docs/manual/initial-setting/template/digital/#commonNumber)と同じような挙動をします。

{{<imgproc usage-guide.png "数式に指定した名前がそのままグラフの凡例として使用されます" />}}

## 作成したグラフはあなただけのものです{#own}

グラフの設定はスタッフアカウントごとに記録されます。あなたが作ったグラフは他のスタッフには見えません。
